---
title: Harris corner detector
categories:
- ComputerVision
use_math: true
---

이미지에서 코너는 edge 등에 비해 noise와 같은 문제에도 안정적으로 descriptor의 역할을 할 수 있다. 
이 때 corner를 찾기 위해서 사용하는 알고리즘 중 harris corner detector에 대해서 알아본다.

## 1. Basic idea
- flat :  지역에서는 모든 방향으로 변화가 없다
- edge : 영역에서는 edge 방향으로는 변화가 없으나 이에 수직한 방향으로는 변화가 있다.
- corner : 대부분의 뱡향으로 변화가 있다.  
![change](https://user-images.githubusercontent.com/79836443/109519097-426a4d00-7aee-11eb-929c-12effbe45adc.png)

이 변화를 측정하기 위해 작은 윈도우(window)를 설정하고 이 윈도우를 x축 방향으로 u, y축 방향으로 v 만큼 이동시킨다.
이때 수식은 다음과 같다.

$\sum_{x,y} w(x,y)[I(x+u,y+v)-I(x,y)]^{2}$

x축, y축 방향 모두에 대해 변화가 크다면 이 값도 커질것이고, 이 값이 크면 corner로 본다.
이 식은 Taylor series로 인해 다음과 같이 근사할 수 있다.

$\approx \sum_{} [I(x,y)+uI_{x}+vI_{y}-I(x,y)]^{2}$ 

$= \sum_{} u^{2}I_{x}^{2}+2uvI_{x}I_{y}+v^{2}I^{2}$ 


그리고 이를 행렬로 나타내면 다음과 같이 된다.

\[= \begin{bmatrix} u&v \end{bmatrix}\sum_{}\left ( \begin{bmatrix} I_{x}^{2} & I_{x}I_{y}\\ I_{x}I_{y} & I_{y}^{2} \end{bmatrix}\right )\begin{bmatrix} u\\ v \end{bmatrix}\]




이때, 가운데 2x2 행렬을 Harris Matrix라고 부르며, corner 외에도 사용이 가능하다.
